{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FormCarneSaludComponent = class FormCarneSaludComponent {\n  constructor(_location, route, router, carnetService) {\n    this._location = _location;\n    this.route = route;\n    this.router = router;\n    this.carnetService = carnetService;\n    this.urlImg = \"\";\n    this.ci = 0;\n    this.fechaVencimiento = new Date(Date.now());\n    this.route.params.subscribe(params => {\n      this.ci = +params['ci'];\n    });\n  }\n  onFileSelected(event) {\n    const inputElement = event.target;\n    if (inputElement.files.length > 0) {\n      const selectedFile = inputElement.files[0];\n      const fileName = selectedFile.name;\n      console.log('Archivo seleccionado:', fileName);\n      this.urlImg = URL.createObjectURL(selectedFile);\n      console.log('Ruta completa del archivo:', this.urlImg);\n    }\n  }\n  enviar() {\n    let carnet = {\n      CI: this.ci,\n      fechaEmision: new Date(Date.now()),\n      fechaVencimiento: this.fechaVencimiento,\n      Comprobante: this.urlImg\n    };\n    this.carnetService.AñadirCarnetSalud(carnet).subscribe(response => {\n      alert(\"Se ha añadido con exito su carnet de salud.\");\n      this.router.navigate([`/`], {\n        relativeTo: this.route\n      });\n    }, error => {\n      console.error('Error en la solicitud POST:', error);\n    });\n  }\n  goBack() {\n    this._location.back();\n  }\n};\nFormCarneSaludComponent = __decorate([Component({\n  selector: 'app-form-carne-salud',\n  templateUrl: './form-carne-salud.component.html',\n  styleUrls: ['./form-carne-salud.component.css']\n})], FormCarneSaludComponent);","map":{"version":3,"names":["Component","FormCarneSaludComponent","constructor","_location","route","router","carnetService","urlImg","ci","fechaVencimiento","Date","now","params","subscribe","onFileSelected","event","inputElement","target","files","length","selectedFile","fileName","name","console","log","URL","createObjectURL","enviar","carnet","CI","fechaEmision","Comprobante","AñadirCarnetSalud","response","alert","navigate","relativeTo","error","goBack","back","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Ignacio\\Desktop\\Obligatorio-BDD\\proyecto-angular\\src\\app\\components\\form-carne-salud\\form-carne-salud.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport {Location} from '@angular/common';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CarnetSaludService } from 'src/app/services/carnet-salud.service';\r\nimport { CarnetSalud } from 'src/app/interfaces/carnetSalud';\r\n \r\n\r\n@Component({\r\n  selector: 'app-form-carne-salud',\r\n  templateUrl: './form-carne-salud.component.html',\r\n  styleUrls: ['./form-carne-salud.component.css']\r\n})\r\nexport class FormCarneSaludComponent {\r\n  urlImg: string = \"\";\r\n  ci: number = 0;\r\n  fechaVencimiento: Date = new Date(Date.now());\r\n\r\n  constructor(private _location: Location,private route: ActivatedRoute,private router: Router, private carnetService: CarnetSaludService){\r\n    this.route.params.subscribe(params => {\r\n      this.ci = +params['ci'];     \r\n    });\r\n   }\r\n\r\n  onFileSelected(event: any): void {\r\n    const inputElement = event.target;\r\n    if (inputElement.files.length > 0) { \r\n      const selectedFile = inputElement.files[0];\r\n      const fileName = selectedFile.name;\r\n      console.log('Archivo seleccionado:', fileName); \r\n      this.urlImg = URL.createObjectURL(selectedFile);\r\n      \r\n      console.log('Ruta completa del archivo:', this.urlImg); \r\n    }\r\n  }\r\n\r\n\r\n  enviar(){\r\n\r\n    let carnet: CarnetSalud ={\r\n      CI: this.ci,\r\n      fechaEmision: new Date(Date.now()),\r\n      fechaVencimiento: this.fechaVencimiento ,\r\n      Comprobante: this.urlImg\r\n    }\r\n\r\n    this.carnetService.AñadirCarnetSalud(carnet).subscribe(\r\n      response => {\r\n     \r\n      \r\n        alert(\"Se ha añadido con exito su carnet de salud.\")\r\n        this.router.navigate([`/`], { relativeTo: this.route });\r\n        \r\n      },\r\n      error => {\r\n        console.error('Error en la solicitud POST:', error);\r\n\r\n      }\r\n    );    \r\n  }\r\n\r\n  goBack(): void{\r\n    this._location.back();\r\n  }\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAYlC,WAAMC,uBAAuB,GAA7B,MAAMA,uBAAuB;EAKlCC,YAAoBC,SAAmB,EAASC,KAAqB,EAASC,MAAc,EAAUC,aAAiC;IAAnH,KAAAH,SAAS,GAATA,SAAS;IAAmB,KAAAC,KAAK,GAALA,KAAK;IAAyB,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,aAAa,GAAbA,aAAa;IAJnH,KAAAC,MAAM,GAAW,EAAE;IACnB,KAAAC,EAAE,GAAW,CAAC;IACd,KAAAC,gBAAgB,GAAS,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,EAAE,CAAC;IAG3C,IAAI,CAACP,KAAK,CAACQ,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACnC,IAAI,CAACJ,EAAE,GAAG,CAACI,MAAM,CAAC,IAAI,CAAC;IACzB,CAAC,CAAC;EACH;EAEDE,cAAcA,CAACC,KAAU;IACvB,MAAMC,YAAY,GAAGD,KAAK,CAACE,MAAM;IACjC,IAAID,YAAY,CAACE,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;MACjC,MAAMC,YAAY,GAAGJ,YAAY,CAACE,KAAK,CAAC,CAAC,CAAC;MAC1C,MAAMG,QAAQ,GAAGD,YAAY,CAACE,IAAI;MAClCC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEH,QAAQ,CAAC;MAC9C,IAAI,CAACd,MAAM,GAAGkB,GAAG,CAACC,eAAe,CAACN,YAAY,CAAC;MAE/CG,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE,IAAI,CAACjB,MAAM,CAAC;;EAE1D;EAGAoB,MAAMA,CAAA;IAEJ,IAAIC,MAAM,GAAe;MACvBC,EAAE,EAAE,IAAI,CAACrB,EAAE;MACXsB,YAAY,EAAE,IAAIpB,IAAI,CAACA,IAAI,CAACC,GAAG,EAAE,CAAC;MAClCF,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;MACvCsB,WAAW,EAAE,IAAI,CAACxB;KACnB;IAED,IAAI,CAACD,aAAa,CAAC0B,iBAAiB,CAACJ,MAAM,CAAC,CAACf,SAAS,CACpDoB,QAAQ,IAAG;MAGTC,KAAK,CAAC,6CAA6C,CAAC;MACpD,IAAI,CAAC7B,MAAM,CAAC8B,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE;QAAEC,UAAU,EAAE,IAAI,CAAChC;MAAK,CAAE,CAAC;IAEzD,CAAC,EACDiC,KAAK,IAAG;MACNd,OAAO,CAACc,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IAErD,CAAC,CACF;EACH;EAEAC,MAAMA,CAAA;IACJ,IAAI,CAACnC,SAAS,CAACoC,IAAI,EAAE;EACvB;CACD;AAnDYtC,uBAAuB,GAAAuC,UAAA,EALnCxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,sBAAsB;EAChCC,WAAW,EAAE,mCAAmC;EAChDC,SAAS,EAAE,CAAC,kCAAkC;CAC/C,CAAC,C,EACW1C,uBAAuB,CAmDnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}